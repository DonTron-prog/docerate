{% extends "base.html" %}

{% block title %}{{ post.metadata.title }} - {{ site.title }}{% endblock %}
{% block description %}{{ post.metadata.description or post.metadata.excerpt|striptags }}{% endblock %}

{% block content %}
<article class="post-single">
    <header class="post-header">
        <h1 class="post-title">{{ post.metadata.title }}</h1>
        <div class="post-meta">
            <time datetime="{{ post.metadata.date.isoformat() }}">
                {{ post.metadata.date.strftime(config.blog.date_format) }}
            </time>
            {% if post.metadata.category %}
                <span class="separator">•</span>
                <a href="/categories/{{ post.metadata.category }}.html" class="category">
                    {{ post.metadata.category }}
                </a>
            {% endif %}
            <span class="separator">•</span>
            <span class="reading-time" data-words="{{ post.content.split()|length }}">
                {{ (post.content.split()|length / 200)|round|int }} min read
            </span>
        </div>
        
        {% if post.metadata.tags %}
        <div class="post-tags">
            {% for tag in post.metadata.tags %}
                <a href="/tags/{{ tag }}.html" class="tag">#{{ tag }}</a>
            {% endfor %}
        </div>
        {% endif %}
    </header>
    
    {% if post.metadata.image %}
    <figure class="post-image">
        <img src="/images/{{ post.metadata.image }}" alt="{{ post.metadata.title }}" loading="lazy">
    </figure>
    {% endif %}
    
    <div class="post-content">
        {{ post.html|safe }}
    </div>
    
    <footer class="post-footer">
        <div class="post-nav">
            <!-- Navigation will be added in a future update -->
        </div>
    </footer>
</article>

<aside class="post-sidebar">
    {% if recent_posts %}
    <section class="widget">
        <h3>Recent Posts</h3>
        <ul class="recent-posts">
            {% for recent in recent_posts %}
            <li>
                <a href="{{ recent.url }}">{{ recent.metadata.title }}</a>
                <time>{{ recent.metadata.date.strftime('%b %d, %Y') }}</time>
            </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}
    
    <section class="widget">
        <h3>Share</h3>
        <div class="share-buttons">
            <a href="https://twitter.com/intent/tweet?text={{ post.metadata.title|urlencode }}&url={{ site.url }}{{ post.url }}" 
               target="_blank" class="share-button twitter">Twitter</a>
            <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ site.url }}{{ post.url }}" 
               target="_blank" class="share-button linkedin">LinkedIn</a>
        </div>
    </section>
</aside>
{% endblock %}